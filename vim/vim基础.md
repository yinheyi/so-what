# VIM 手册学习

> 类型: 笔记
> 作者: 殷和义
> 创建日期: 2020.8.23
> 最后修改日期:2020.8.24
----

[toc]

## 帮助

vim有很多模式.在默认情况下,帮助系统显示普通模式的命令的帮助文档.例如:`help x`.

要显示其它模式下的帮助文档,需要使用模式前缀:

| 模式 | 前缀 | 例子 |
|:---:|:---:|:---|
|普通模式|无|:help d|
|插入模式|i_|:help i_ctrl-h|
|可视模式|v_|:help i_ctrl-h|
|命令模式中的命令|:|:help :s 参看s命令的作用|
|命令模式中的参数或编辑时按下|c_|:help c_%, 参看%在命令行的作用|
|启动vim时的命令行参数|-|:help -t|
|正则表达式的参数|/|:help /*|
|寄存器|quote|:help quote" 参看无名寄存器的作用|
|vim脚本中的符号|expr-|:help expr-+ 参看+号在脚本中的作用|

## 移动命令

### 词移动

单词的分割,vim不仅仅以空格分为分隔符, 具体没有去了解.

|命令|作用|
|:---:|:---:|
|w|移动到单词首部的下一个位置|
|b|移动到单词首部的上一个位置|
|e|移动到单词尾部的下一个位置|
|ge|移动到单词尾部的上一个位置|

**其它:** 如果要以空格为分隔符,对单词进行移动,把上面命令的w/b/e改成大写即可.

### 行内移动

- 使用`^`移动至行首的非空字符处, 使用`0`移动至行首, 使用`$`移动至行尾.

- 使用单字符查找命令进行行内移动
  1. 使用`f + 字符`命令进行向右查找, `;`跳转到下一处, `,`跳转到上一处.
  2. 使用`F + 字符`命令进行向左查找, `;`跳转到下一处, `,`跳转到上一处.

### 移动到指定行

- 使用`gg`命令移动至文件首行, `G`命令移动至文件尾行.
- 使用`数字gg`或`数字G`命令移动到指定的行号上, 例如:`100gg`.
- 使用`H`命令移动到当前屏幕的首行, `M`命令移动到当前屏幕的中间行, `L`命令移动到当前屏幕的尾行.
- 使用`数字%`移动至文件的%num处,例如: 使用`78%`可以移动至文件的%79处.

### 滚屏移动
|指令|行为|
|:---:|---:|
|ctrl-d|向下移动半屏|
|ctrl-u|向上移动半屏|
|ctrl-f|向下移动一屏|
|ctrl-b|向上移动一屏|
|ctrl-e|向下滚动一行|
|ctrl-y|向上滚动一行|


## 跳转命令

### 基于tag的跳转:

- ctrl-] : 跳转到当前光标所有单词的定义之处(基于tags)
- ctrl-t : 在tag栈中回退跳1步, 到之前的tag处.(可以指定count步), 相当于对tag栈进行出栈操作.

使用`:tags`指令打印当前的tag 栈信息.

### 基于跳转列表的跳转:

- ctrl-o : jump lists中回退一步.
- ctrl-i : 在jump lists中前进一步.

使用 `:jumps` 指令打印当前的jump 列表, 使用 `:clear` 指令可以清空jumps列表.

### 基于标志的跳转

可以使用 `m + 标记符`用于在文件内作标记, 然后使用 ``+ 标记符 ` 用于跳转到标记之处. 基于对于标记符:

- 在文件内,使用a-z作为标记符.  小写字母标记符保存到当前buffer中, 只记住的是内容,当标记的内容删除了,该标记也就被删除了.
- 在文件间,使用A-Z作为标记符. 大写字母标记符,它记住的是文件名以及行号,明白吗??!!
- 还有一些特殊的标记符,例如常用的: `` `记住了上一次跳转的位置, `^` 记住了上一次退出编辑模式的位置, `.` 记住了上一次被修改的位置.

使用`:marks`指令可以查看当前的标记符的状态, 使用`delm + 标记符`指令可以删除指定的标记符信息.

### 括号匹配跳转

使用 `%` 可以在匹配的括号之间来回跳转.

## 查找命令

使用`/单词` 向下查找匹配的字符串, 使用 n 跳转到下一个,使用 N 跳转到上一个. 另外还可以使用`*` 向下查找光标所在的单词.
使用`?单词` 向下查找匹配的字符串, 使用 n 跳转到下一个,使用 N 跳转到上一个. 另外还可以使用`#` 向下查找光标所在的单词.

查找时,如果要忽略大小写,使用`set ignorecase`命令. 如果想增量查找,可以使用`set incsearch`命令.

查找的字符串可以是正则表达式, 比如: `\<`匹配单词首, `\>`匹配单词尾, `^`匹配行首, `$`匹配行尾等.

## 删除/修改/复制命令

首先说一个非常好用的命令, `.`可以重复任何除 "u" (撤销),CTRL-R (重做) 和冒号命令外的**修改操作**. 平时使用它非常的方便.

vim中的指令通常是组合的, 形式大致是这样的: count次数 + 操作命令 + 移动命令. 其中,操作命令通常有删除d, 编辑c, 复制y;移动命令比如gg, G, w, e, b等.

### 删除命令

删除命令的命令是d, 有很多组合形式,例如:dw/db/dG/dgg等. 另外,还有:

|命令|含义|
|:---:|:---|
|x|删除光标下的单个字符|
|X|删除光标前的单个字符|
|dd|删除光标所在的一行|
|D|删除光标至行尾部分, 也可以使用d$呀|


### 修改命令

修改命令与删除命令几乎相同,唯一的区别是修改命令执行完删除动作之后会进入插入模式,而删除命令不会.修改命令是c, 也有很多组合形式,如cw/cb/cG/cgg. 另外,还有:

|命令|含义|
|:---:|:---|
|s|修改光标下的单个字符 |
|S或cc|修改一整行|
|C|修改光标至行尾的部分|
|r|替换光标下的字符|
|R|从光标开始一直替换字符,直到退出为止.|

### 复制命令

在vim中,复制命令为y(yank), 粘帖命令为p(put). 同样,复制也有很多组合形式,例如:yw/yb/ygg/yG等. 另外,还可以选择复制(涉及到可视模式). 复制的东西跑哪里去了?跑寄存器中去了.vim中有很多寄存器用于保存内容.后面会讲到. 下面给出两个常用的复制命令:
|命令|含义|
|:---:|:---|
|yy|复制光标所在行 |
|count数 + Y|复制从光标开始的N行 |

### 可视模式

1. 使用`v`命令,进入字符选择状态; 使用`V`命令, 进入行选择状态; 使用`ctrl+v`命令, 进入字符块选择状态;
2. 在选择状态下,按`o`或`O`,可以在两端之间进行跳转.

### 寄存器

